+++ src/lib/gtest/src/gtest-filepath.cc
@@ -331,7 +331,8 @@
 #elif GTEST_OS_WINDOWS
   int result = _mkdir(pathname_.c_str());
 #else
-  int result = mkdir(pathname_.c_str(), 0777);
+  FilePath removed_sep(this->RemoveTrailingPathSeparator());
+  int result = mkdir(removed_sep.c_str(), 0777);
 #endif  // GTEST_OS_WINDOWS_MOBILE
 
   if (result == -1) {
